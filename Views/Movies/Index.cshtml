@model IEnumerable<KasuleMoviesApp.Models.Movie>

@{
    ViewData["Title"] = "Movies";
}

<h1>Kasule's Favorite Movies</h1>

<form method="get" action="@Url.Action("Index")" class="mb-3">
    <label for="year">Select Year:</label>
    <select id="year" name="year">
        <option value="" selected="@(Context.Request.Query["year"].Count == 0 ? "selected" : null)">All</option>
        <option value="2010" selected="@(Context.Request.Query["year"] == "2010" ? "selected" : null)">2010</option>
        <option value="2008" selected="@(Context.Request.Query["year"] == "2008" ? "selected" : null)">2008</option>
        <option value="1999" selected="@(Context.Request.Query["year"] == "1999" ? "selected" : null)">1999</option>
    </select>
    <button type="submit">Filter</button>
    @if (Context.Request.Query.ContainsKey("year") && !string.IsNullOrEmpty(Context.Request.Query["year"]))
    {
        <span class="ms-2">Showing @Context.Request.Query["year"] and newer</span>
    }
    else
    {
        <span class="ms-2">Showing all years</span>
    }
    <a class="ms-3" href="@Url.Action("Index")">Reset</a>
 </form>

<ul>
@foreach (var movie in Model)
{
    <li>@movie.Title (@movie.Year)</li>
}
</ul>
